# Railway Configuration for Finance Hub
# This file defines multiple services for the project

[build]
builder = "NIXPACKS"
buildCommand = "cd backend && pip install -r requirements.txt"

# Web service (Django + Gunicorn)
[deploy]
startCommand = "cd backend && gunicorn core.wsgi:application --bind 0.0.0.0:$PORT"
healthcheckPath = "/api/health/"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Note: Railway now uses multiple services in the dashboard
# You need to create separate services:
#
# 1. Worker service (for async task processing):
#    cd backend && celery -A core worker --loglevel=info --concurrency=2
#
# 2. Beat service (for scheduled tasks - REQUIRED for AI Insights):
#    cd backend && bash celery_beat.sh
#
# See docs/CELERY_BEAT_SETUP.md for detailed setup instructions
